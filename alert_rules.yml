groups:
  - name: default
    rules:
    - alert: InstanceDown
      expr: up == 0
      for: 1m
      labels:
        severity: critical
      annotations:
        summary: "Instance {{ $labels.instance }} down"
        description: "{{ $labels.instance }} of job {{ $labels.job }} has been down for more than 5 minutes."

    - alert: HostCPUUtilisation
      expr: 100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 70
      for: 1m
      labels:
        severity: warning
      annotations:
        description: 'High CPU utilisation detected for instance {{ $labels.instance_id
          }} tagged as: {{ $labels.instance_name_tag }}, the utilisation is currently:
          {{ $value }}%'
        summary: CPU Utilisation Alert   
